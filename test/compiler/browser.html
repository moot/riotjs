
<!doctype html>

<head>
  <title>Riot browser compilation</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge">

  <!--[if lt IE 9]>
    <script src="../ie8/es5-shim.js"></script>
    <script src="../ie8/html5-shiv.js"></script>
    <script>html5.addElements('timetable timer')</script>
  <![endif]-->

  <script type="riot/tag" id="tag_src">
    <foo>
      <p>{ opts.baz } { bar }</p>

      this.bar = 'romutus'
    </foo>
    <timetable>
      <timer start={ time } each={ time, i in times }></timer>

      <foo barz="899" baz="90"></foo>

      <p>{ kama }</p>

      this.times = [ 1, 3, 5 ]
      this.kama = 'jooo'
    </timetable>
  </script>

  <!--
  -->
  <script type="riot/tag" src="../tag/timer.tag"></script>

</head>

<body>

  <timetable></timetable>

  <script src="../../dist/riot/riot.js"></script>
  <script src="../../lib/compiler.js"></script>

  <script>

    riot.compile(function() {
      tags = riot.mount('timetable', { start: 0 })
    })


    riot.update()
    // grab source code for performance tests

    var src = tag_src.innerHTML

    // compile timer 1000 times and see how long it takes
    var begin = +new Date

    for (var i = 0; i < 1000; i++) {
      riot.compile(src, true)
    }

    console.info(+new Date - begin)

  </script>

</body>

